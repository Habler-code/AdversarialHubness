input:
  mode: embeddings_only
  embeddings_path: examples/data/toy_embeddings.npy
  metadata_path: examples/data/toy_metadata.json
  metric: cosine

index:
  type: flat
  params: {}
  save_path: examples/data/toy_index.index

scan:
  k: 10
  num_queries: 200  # Similar to demo
  query_sampling: mixed
  batch_size: 32
  mixed_proportions:
    real_queries: 0.0
    random_docs_as_queries: 0.5
    cluster_centroids: 0.5
  seed: 42

detectors:
  hubness:
    enabled: true
    validate_exact: false
    use_rank_weights: true
    use_distance_weights: true
  cluster_spread:
    enabled: true
    num_clusters: 10
    batch_size: 100
  stability:
    enabled: false
    candidates_top_x: 50
    perturbations: 3
    sigma: 0.01
    normalize: true
  dedup:
    enabled: true
    text_hash_field: text_hash
    duplicate_threshold: 0.95
    suppress_boilerplate: true

scoring:
  weights:
    hub_z: 0.6
    cluster_spread: 0.2
    stability: 0.2
    boilerplate: 0.3

# Thresholds tuned for high precision detection
# Higher hub_z = fewer false positives, but may miss weak hubs
thresholds:
  policy: z_score  # Only use z_score threshold
  hub_z: 4.0  # Set above FPs (Z~3.2) but below weakest hub (Z~4.5)
  percentile: 0.05  # Not used with z_score policy

output:
  out_dir: examples/data/reports/
  privacy_mode: false
  emit_embeddings: false
  max_example_queries: 5
